import{d as Y,r as M,I as Z,C as H,e as i,f as d,F as N,k as L,g as p,j as h,t as $,m as S,s as r,y,z as R,v as V,p as x,n as ee,x as q,_ as te}from"./index-B_JydWLM.js";const J=w=>(x("data-v-cdef8cc5"),w=w(),ee(),w),ae={class:"wrapper"},ne=["onClick","onContextmenu"],se={key:0,class:"iconfont mark-flag"},oe={key:0,class:"iconfont"},le={key:1},ce={class:"info"},ie={class:"item boomer"},re=J(()=>d("i",{class:"iconfont"},"",-1)),ue={class:"item timer"},fe=J(()=>d("i",{class:"iconfont"},"",-1)),_=-9,de=Y({__name:"index",setup(w){const k=M(0),A=M(0),z=M(null);let W=0;const s=M([[]]);let u=11,f=6,v=10,b=M("easy"),g=!1,B=0;Z(()=>{C()});function C(){g=!1,k.value=v,A.value=0;const e=H(z);let t=e.clientWidth-20,c=e.clientHeight-40;W=Math.ceil(t/f),u=Math.floor(c/W),K(),s.value=O(u,f,v)}let F=null;function K(){let e=1;clearInterval(F),F=setInterval(()=>{A.value=e++},1e3)}function j(){clearInterval(F)}function O(e,t,c){let o=[];for(let a=0;a<e;a++){const n=new Array(t);n.fill(0),o[a]=n}for(let a=0;a<c;a++)D();function D(){let a=Math.floor(Math.random()*(e-1)),n=Math.floor(Math.random()*(t-1));o[a][n]!==_?o[a][n]=_:D()}for(let a=0;a<e;a++)for(let n=0;n<t;n++)if(o[a][n]===_){for(let l=-1;l<2;l++)m(a-1,n+l),m(a+1,n+l);m(a,n+1),m(a,n-1)}function m(a,n){a>=0&&a<e&&n>=0&&n<t&&o[a][n]!==_&&(o[a][n]-=1)}return o}function P(e,t){if(g)return;s.value[e][t]>10?(s.value[e][t]=-(s.value[e][t]%10),k.value+=1):k.value&&(s.value[e][t]=-s.value[e][t]+10,k.value-=1)}function Q(e,t){if(g)return;const c=s.value[e][t];if(!(c>0)){if(c===0){I(e,t);return}c===_?(s.value[e][t]=-s.value[e][t],q.error("游戏失败"),g=!0,j(),E()):(B+=1,s.value[e][t]=-s.value[e][t]),u*f-B<=v&&(q.success("恭喜你，游戏成功！"),B=0,g=!0,j(),E())}}function E(){let e=0,t=0;const c=setInterval(()=>{if(e>=u||t>=f){clearInterval(c);return}s.value[e][t]===_&&(s.value[e][t]=-s.value[e][t]),e<u&&(t<f-1?t++:(e++,t=0))},10)}function I(e,t){if(e<0||e>=u||t<0||t>=f)return;if(s.value[e][t]===0){B+=1,s.value[e][t]=99;for(let o=-1;o<2;o++)I(e-1,t+o),I(e+1,t+o);I(e,t+1),I(e,t-1)}}function U(){C()}function X(e){e==="easy"?(u=11,f=6,v=10,b.value=e,C()):e==="medium"?(u=16,f=9,v=35,b.value=e,C()):e==="hard"&&(u=22,f=12,v=70,b.value=e,C())}return(e,t)=>{const c=S("a-button"),o=S("a-select-option"),D=S("a-select"),m=S("a-space");return r(),i("div",ae,[d("section",{ref_key:"game",ref:z,class:"game-box",onContextmenu:t[0]||(t[0]=a=>{a.preventDefault()})},[(r(!0),i(N,null,L(s.value,(a,n)=>(r(),i("div",{class:"rows",key:n},[(r(!0),i(N,null,L(a,(l,T)=>(r(),i("div",{class:y(["cols",`color${l} ${l>0&&l<10||l==99?"sweeped":""}`]),key:T,onClick:G=>Q(n,T),onContextmenu:G=>{G.preventDefault(),P(n,T)}},[l>=10?(r(),i(N,{key:0},[l!=99?(r(),i("span",se,"")):R("",!0)],64)):l>0?(r(),i(N,{key:1},[l===-_?(r(),i("span",oe,"")):(r(),i("span",le,$(l),1))],64)):R("",!0)],42,ne))),128))]))),128))],544),d("footer",null,[p(m,{class:"tool"},{default:h(()=>[p(c,{onClick:U,class:"restart"},{default:h(()=>[V("重启")]),_:1}),p(D,{onChange:X,value:H(b),style:{width:"120px"}},{default:h(()=>[p(o,{value:"easy"},{default:h(()=>[V("简单")]),_:1}),p(o,{value:"medium"},{default:h(()=>[V("中等")]),_:1}),p(o,{value:"hard"},{default:h(()=>[V("困难")]),_:1})]),_:1},8,["value"])]),_:1}),d("div",ce,[d("div",ie,[re,d("span",null,$(k.value),1)]),d("div",ue,[fe,d("span",null,$(A.value),1)])])])])}}}),ve=te(de,[["__scopeId","data-v-cdef8cc5"]]);export{ve as default};
