import{d as J,q as K,u as X,c as m,G as Y,r as y,H as Q,I as Z,J as ee,B as te,e as S,o as s,g as o,F as C,h as r,n as T,t as w,z as h,K as E,i as k,l as O,y as W,p as se,x as oe,s as ne,v as ie,L as ae,_ as re}from"./index-B_Lu1Zzc.js";const le=g=>(ne("data-v-b33175be"),g=g(),ie(),g),ce={key:0,class:"status-container"},de=le(()=>r("div",{class:"empty-status"},"项目列表为空",-1)),ue=[de],ve={class:"content-wrap"},_e={class:"mid-view-window"},pe=["onClick"],he={key:0,class:"scroll-into-tip"},fe={key:0},me={class:"title"},ye={key:0},we=["href"],ke={class:"attach"},ge={key:0},Ie=["href"],Le={key:0,class:"desc"},We={key:1,class:"mobile-view-mode"},je={class:"info"},Re={key:0},be={class:"title"},De={key:0},Ce=["href"],Ee={class:"attach"},xe={key:0},Ae=["href"],Ne={key:0,class:"desc"},Se=J({__name:"project",setup(g){K.config({duration:1,maxCount:1});const V=X(),x=se(),q=oe(),B=m(()=>V.getDeviceType),z=m(()=>B.value===ae.MOBILE),c=Y({projectList:[],originList:[]}),l={NARROW:"narrow",WIDE:"wide"},u=y(l.NARROW),A=y(null),v=y(0),a=m(()=>c.projectList[v.value]);Q(a,t=>{x.query.id=t.id});const M=y(0),j=y(0),P=m(()=>u.value===l.NARROW?{marginTop:0}:{marginTop:`-${j.value}px`}),$=m(()=>u.value===l.WIDE?{opacity:1,marginTop:0}:{marginTop:`${j.value}px`});Z(()=>{R(),window.addEventListener("resize",R)}),ee(()=>{window.removeEventListener("resize",R)}),document.onkeyup=function(t){const{code:e}=t;e==="ArrowLeft"&&p(-1),e==="ArrowRight"&&p(1),e==="ArrowUp"&&f(l.NARROW,-1),e==="ArrowDown"&&f(l.WIDE,1)},H();function H(){const t=te();c.originList=t;const e=t.length,i=[];for(;i.length<5;)for(let d=0;d<e;d++){const D=t[d];i.push({...D})}const I=x.query.id,n=i.findIndex(d=>d.id==Number(I));v.value=n>-1?n:0;const L=i.length;let b=2-v.value;for(let d=0;d<L;d++){const D=i[d];D.order=b%L,b++}c.projectList=i}function R(){const t=A.value;t&&(M.value=t.clientWidth,j.value=t.clientHeight)}let _=null;function f(t,e){_||!c.projectList.length||(_=!0,setTimeout(()=>{_=null},500),!t&&!e&&(u.value==l.WIDE?u.value=l.NARROW:u.value=l.WIDE),u.value=t)}function F(t){t.preventDefault();const{deltaY:e,deltaX:i}=t;Math.abs(e)>Math.abs(i)?e>0?f(l.WIDE,1):f(l.NARROW,-1):i>0?p(1):p(-1)}function N(){const{id:t}=a.value;q.push({name:"blog-gallery",query:{projectId:t}})}function G(t){const{order:e=0}=t;return{left:e*50-75+"%"}}function p(t){if(u.value===l.WIDE)return;const e=c.projectList.length;if(!(_||!e)){if(_=!0,t>0){for(const i of c.projectList)i.order=(i.order-1+e)%e;v.value=(v.value+1)%e}if(t<0){for(const i of c.projectList)i.order=(i.order+1)%e;v.value=(v.value-1+e)%e}setTimeout(()=>{_=null},500)}}function U(t){const{order:e}=t;e!==a.value.order&&(e>a.value.order&&p(1),e<a.value.order&&p(-1))}return(t,e)=>{const i=S("Image"),I=S("a-space");return s(),o("div",{class:W(["project-container",u.value]),ref_key:"viewerRef",ref:A},[c.projectList.length?(s(),o(C,{key:1},[z.value?(s(),o("div",We,[(s(!0),o(C,null,T(c.originList,n=>(s(),o("div",{class:"swiper-item",key:n},[k(i,{src:n.poster,fit:"contain"},null,8,["src"]),r("div",je,[n?(s(),o("footer",Re,[r("div",be,w(n.title),1),k(I,null,{default:O(()=>[r("div",null,[n.link?(s(),o("a",{key:1,target:"_blank",href:n.link},"项目地址",8,Ce)):(s(),o("span",De,"项目地址"))]),r("div",Ee,[n.attachment?(s(),o("a",{key:1,target:"_blank",href:n.attachment}," 项目附件 ",8,Ae)):(s(),o("span",xe,"项目附件"))]),r("div",{class:W(["theme-link",{disabled:!n.gallery}]),onClick:N}," 项目截图 ",2)]),_:2},1024),n.remark?(s(),o("div",Ne,w(n.remark),1)):h("",!0)])):h("",!0)])]))),128))])):(s(),o("div",{key:0,onWheel:F,class:"pc-view-mode"},[r("div",{class:"pc-narrow-wrap",style:E(P.value)},[r("div",ve,[r("div",_e,[(s(!0),o(C,null,T(c.projectList,(n,L)=>(s(),o("div",{class:W(["drawer-item",{[`drawer-item-order-${n.order}`]:!0}]),key:L,onClick:b=>U(n),style:E(G(n))},[k(i,{style:{width:"100%",height:"100%"},src:n.poster,fit:"cover"},null,8,["src"])],14,pe))),128))]),a.value?(s(),o("div",he,[r("div",null,w(a.value.title),1),r("div",{class:"iconfont",onClick:e[0]||(e[0]=n=>f(l.WIDE,1))},"")])):h("",!0)])],4),a.value?(s(),o("div",{key:0,class:"view-wide-wrap",style:E($.value)},[k(i,{style:{width:"100%",height:"100%"},src:a.value.poster,fit:"contain"},null,8,["src"]),a.value?(s(),o("footer",fe,[r("div",me,w(a.value.title),1),k(I,null,{default:O(()=>[r("div",null,[a.value.link?(s(),o("a",{key:1,target:"_blank",href:a.value.link},"项目地址",8,we)):(s(),o("span",ye,"项目地址"))]),r("div",ke,[a.value.attachment?(s(),o("a",{key:1,target:"_blank",href:a.value.attachment}," 项目附件 ",8,Ie)):(s(),o("span",ge,"项目附件"))]),r("div",{class:W(["theme-link",{disabled:!a.value.gallery}]),onClick:N}," 项目截图 ",2)]),_:1}),a.value.remark?(s(),o("div",Le,w(a.value.remark),1)):h("",!0)])):h("",!0)],4)):h("",!0)],32))],64)):(s(),o("div",ce,ue))],2)}}}),Oe=re(Se,[["__scopeId","data-v-b33175be"]]);export{Oe as default};
