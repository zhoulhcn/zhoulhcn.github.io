import{d as J,x as K,u as X,c as m,G as Y,r as y,H as Q,I as Z,J as ee,B as te,e as s,F as E,f as r,k as S,t as k,z as h,K as b,g as w,j as T,y as W,l as se,m as O,o as oe,s as o,p as ne,n as ie,L as ae,_ as re}from"./index-BQXm6FxJ.js";const le=g=>(ne("data-v-3a9172d9"),g=g(),ie(),g),ce={key:0,class:"status-container"},de=le(()=>r("div",{class:"empty-status"},"项目列表为空",-1)),ue=[de],ve={class:"content-wrap"},_e={class:"mid-view-window"},pe=["onClick"],he={key:0,class:"scroll-into-tip"},fe={key:0},me={class:"title"},ye={key:0},ke=["href"],we={class:"attach"},ge={key:0},Ie=["href"],Le={key:0,class:"desc"},We={key:1,class:"mobile-view-mode"},je={class:"info"},Re={key:0},De={class:"title"},Ce={key:0},Ee=["href"],be={class:"attach"},xe={key:0},Ae=["href"],Ne={key:0,class:"desc"},Se=J({__name:"project",setup(g){K.config({duration:1,maxCount:1});const V=X(),x=se(),B=oe(),q=m(()=>V.getDeviceType),z=m(()=>q.value===ae.MOBILE),c=Y({projectList:[],originList:[]}),l={NARROW:"narrow",WIDE:"wide"},u=y(l.NARROW),A=y(null),v=y(0),a=m(()=>c.projectList[v.value]);Q(a,t=>{x.query.id=t.id});const M=y(0),j=y(0),P=m(()=>u.value===l.NARROW?{marginTop:0}:{marginTop:`-${j.value}px`}),$=m(()=>u.value===l.WIDE?{opacity:1,marginTop:0}:{marginTop:`${j.value}px`});Z(()=>{R(),window.addEventListener("resize",R)}),ee(()=>{window.removeEventListener("resize",R)}),document.onkeyup=function(t){const{code:e}=t;e==="ArrowLeft"&&p(-1),e==="ArrowRight"&&p(1),e==="ArrowUp"&&f(l.NARROW,-1),e==="ArrowDown"&&f(l.WIDE,1)},H();function H(){const t=te();c.originList=t;const e=t.length,i=[];for(;i.length<5;)for(let d=0;d<e;d++){const C=t[d];i.push({...C})}const I=x.query.id,n=i.findIndex(d=>d.id==Number(I));v.value=n>-1?n:0;const L=i.length;let D=2-v.value;for(let d=0;d<L;d++){const C=i[d];C.order=D%L,D++}c.projectList=i}function R(){const t=A.value;t&&(M.value=t.clientWidth,j.value=t.clientHeight)}let _=null;function f(t,e){_||!c.projectList.length||(_=!0,setTimeout(()=>{_=null},500),!t&&!e&&(u.value==l.WIDE?u.value=l.NARROW:u.value=l.WIDE),u.value=t)}function F(t){t.preventDefault();const{deltaY:e,deltaX:i}=t;Math.abs(e)>Math.abs(i)?e>0?f(l.WIDE,1):f(l.NARROW,-1):i>0?p(1):p(-1)}function N(){const{id:t}=a.value;B.push({name:"blog-gallery",query:{projectId:t}})}function G(t){const{order:e=0}=t;return{left:e*50-75+"%"}}function p(t){if(u.value===l.WIDE)return;const e=c.projectList.length;if(!(_||!e)){if(_=!0,t>0){for(const i of c.projectList)i.order=(i.order-1+e)%e;v.value=(v.value+1)%e}if(t<0){for(const i of c.projectList)i.order=(i.order+1)%e;v.value=(v.value-1+e)%e}setTimeout(()=>{_=null},500)}}function U(t){const{order:e}=t;e!==a.value.order&&(e>a.value.order&&p(1),e<a.value.order&&p(-1))}return(t,e)=>{const i=O("Image"),I=O("a-space");return o(),s("div",{class:W(["project-container",u.value]),ref_key:"viewerRef",ref:A},[c.projectList.length?(o(),s(E,{key:1},[z.value?(o(),s("div",We,[(o(!0),s(E,null,S(c.originList,n=>(o(),s("div",{class:"swiper-item",key:n},[w(i,{src:n.poster,fit:"contain"},null,8,["src"]),r("div",je,[n?(o(),s("footer",Re,[r("div",De,k(n.title),1),w(I,null,{default:T(()=>[r("div",null,[n.link?(o(),s("a",{key:1,target:"_blank",href:n.link},"项目地址",8,Ee)):(o(),s("span",Ce,"项目地址"))]),r("div",be,[n.attachment?(o(),s("a",{key:1,target:"_blank",href:n.attachment}," 项目附件 ",8,Ae)):(o(),s("span",xe,"项目附件"))]),r("div",{class:W(["theme-link",{disabled:!n.gallery}]),onClick:N}," 项目截图 ",2)]),_:2},1024),n.remark?(o(),s("div",Ne,k(n.remark),1)):h("",!0)])):h("",!0)])]))),128))])):(o(),s("div",{key:0,onWheel:F,class:"pc-view-mode"},[r("div",{class:"pc-narrow-wrap",style:b(P.value)},[r("div",ve,[r("div",_e,[(o(!0),s(E,null,S(c.projectList,(n,L)=>(o(),s("div",{class:W(["drawer-item",{[`drawer-item-order-${n.order}`]:!0}]),key:L,onClick:D=>U(n),style:b(G(n))},[w(i,{style:{width:"100%",height:"100%"},src:n.poster,fit:"cover"},null,8,["src"])],14,pe))),128))]),a.value?(o(),s("div",he,[r("div",null,k(a.value.title),1),r("div",{class:"iconfont",onClick:e[0]||(e[0]=n=>f(l.WIDE,1))},"")])):h("",!0)])],4),a.value?(o(),s("div",{key:0,class:"view-wide-wrap",style:b($.value)},[w(i,{style:{width:"100%",height:"100%"},src:a.value.poster,fit:"contain"},null,8,["src"]),a.value?(o(),s("footer",fe,[r("div",me,k(a.value.title),1),w(I,null,{default:T(()=>[r("div",null,[a.value.link?(o(),s("a",{key:1,target:"_blank",href:a.value.link},"项目地址",8,ke)):(o(),s("span",ye,"项目地址"))]),r("div",we,[a.value.attachment?(o(),s("a",{key:1,target:"_blank",href:a.value.attachment}," 项目附件 ",8,Ie)):(o(),s("span",ge,"项目附件"))]),r("div",{class:W(["theme-link",{disabled:!a.value.gallery}]),onClick:N}," 项目截图 ",2)]),_:1}),a.value.remark?(o(),s("div",Le,k(a.value.remark),1)):h("",!0)])):h("",!0)],4)):h("",!0)],32))],64)):(o(),s("div",ce,ue))],2)}}}),Oe=re(Se,[["__scopeId","data-v-3a9172d9"]]);export{Oe as default};
