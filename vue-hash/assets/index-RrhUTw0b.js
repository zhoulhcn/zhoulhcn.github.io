import{d as Y,r as M,I as Z,h as H,o as c,e as r,f as d,F as D,l as L,g as p,k as h,t as $,n as N,z as y,A as R,x as S,p as x,q as ee,y as j,_ as te}from"./index-b6W75lZw.js";const J=w=>(x("data-v-1f59f7a2"),w=w(),ee(),w),ae={class:"wrapper"},ne=["onClick","onContextmenu"],oe={key:0,class:"iconfont mark-flag"},se={key:0,class:"iconfont"},le={key:1},ie={class:"info"},ce={class:"item boomer"},re=J(()=>d("i",{class:"iconfont"},"",-1)),ue={class:"item timer"},fe=J(()=>d("i",{class:"iconfont"},"",-1)),_=-9,de=Y({__name:"index",setup(w){const k=M(0),V=M(0),z=M(null);let W=0;const o=M([[]]);let u=11,f=6,v=10,b=M("easy"),g=!1,B=0;Z(()=>{C()});function C(){g=!1,k.value=v,V.value=0;const e=H(z);let t=e.clientWidth-20,i=e.clientHeight-40;W=Math.ceil(t/f),u=Math.floor(i/W),K(),o.value=O(u,f,v)}let F=null;function K(){let e=1;clearInterval(F),F=setInterval(()=>{V.value=e++},1e3)}function q(){clearInterval(F)}function O(e,t,i){let s=[];for(let a=0;a<e;a++){const n=new Array(t);n.fill(0),s[a]=n}for(let a=0;a<i;a++)A();function A(){let a=Math.floor(Math.random()*(e-1)),n=Math.floor(Math.random()*(t-1));s[a][n]!==_?s[a][n]=_:A()}for(let a=0;a<e;a++)for(let n=0;n<t;n++)if(s[a][n]===_){for(let l=-1;l<2;l++)m(a-1,n+l),m(a+1,n+l);m(a,n+1),m(a,n-1)}function m(a,n){a>=0&&a<e&&n>=0&&n<t&&s[a][n]!==_&&(s[a][n]-=1)}return s}function P(e,t){if(g)return;o.value[e][t]>10?(o.value[e][t]=-(o.value[e][t]%10),k.value+=1):k.value&&(o.value[e][t]=-o.value[e][t]+10,k.value-=1)}function Q(e,t){if(g)return;const i=o.value[e][t];if(!(i>0)){if(i===0){I(e,t);return}i===_?(o.value[e][t]=-o.value[e][t],j.error("游戏失败"),g=!0,q(),E()):(B+=1,o.value[e][t]=-o.value[e][t]),u*f-B<=v&&(j.success("恭喜你，游戏成功！"),B=0,g=!0,q(),E())}}function E(){let e=0,t=0;const i=setInterval(()=>{if(e>=u||t>=f){clearInterval(i);return}o.value[e][t]===_&&(o.value[e][t]=-o.value[e][t]),e<u&&(t<f-1?t++:(e++,t=0))},10)}function I(e,t){if(e<0||e>=u||t<0||t>=f)return;if(o.value[e][t]===0){B+=1,o.value[e][t]=99;for(let s=-1;s<2;s++)I(e-1,t+s),I(e+1,t+s);I(e,t+1),I(e,t-1)}}function U(){C()}function X(e){e==="easy"?(u=11,f=6,v=10,b.value=e,C()):e==="medium"?(u=16,f=9,v=35,b.value=e,C()):e==="hard"&&(u=22,f=12,v=70,b.value=e,C())}return(e,t)=>{const i=N("a-button"),s=N("a-select-option"),A=N("a-select"),m=N("a-space");return c(),r("div",ae,[d("section",{ref_key:"game",ref:z,class:"game-box",onContextmenu:t[0]||(t[0]=a=>{a.preventDefault()})},[(c(!0),r(D,null,L(o.value,(a,n)=>(c(),r("div",{class:"rows",key:n},[(c(!0),r(D,null,L(a,(l,T)=>(c(),r("div",{class:y(["cols",`color${l} ${l>0&&l<10||l==99?"sweeped":""}`]),key:T,onClick:G=>Q(n,T),onContextmenu:G=>{G.preventDefault(),P(n,T)}},[l>=10?(c(),r(D,{key:0},[l!=99?(c(),r("span",oe,"")):R("",!0)],64)):l>0?(c(),r(D,{key:1},[l===-_?(c(),r("span",se,"")):(c(),r("span",le,$(l),1))],64)):R("",!0)],42,ne))),128))]))),128))],544),d("footer",null,[p(m,{class:"tool"},{default:h(()=>[p(i,{onClick:U,class:"restart"},{default:h(()=>[S("重启")]),_:1}),p(A,{onChange:X,value:H(b),style:{width:"120px"}},{default:h(()=>[p(s,{value:"easy"},{default:h(()=>[S("简单")]),_:1}),p(s,{value:"medium"},{default:h(()=>[S("中等")]),_:1}),p(s,{value:"hard"},{default:h(()=>[S("困难")]),_:1})]),_:1},8,["value"])]),_:1}),d("div",ie,[d("div",ce,[re,d("span",null,$(k.value),1)]),d("div",ue,[fe,d("span",null,$(V.value),1)])])])])}}}),ve=te(de,[["__scopeId","data-v-1f59f7a2"]]);export{ve as default};
