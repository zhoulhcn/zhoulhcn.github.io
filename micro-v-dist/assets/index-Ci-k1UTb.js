import{d as U,r as b,G as X,A as E,o as r,e as u,f as d,F as A,k as H,g as _,j as k,t as $,m as D,v as Y,x as L,q as N,s as R,_ as Z}from"./index-CnwkVNSk.js";const y={class:"wrapper"},x=["onClick","onContextmenu"],ee={key:0,class:"iconfont mark-flag"},te={key:0,class:"iconfont"},ne={key:1},le={class:"info"},ae={class:"item boomer"},se={class:"item timer"},v=-9,oe=U({__name:"index",setup(ie){const g=b(0),V=b(0),G=b(null);let W=0;const a=b([[]]);let f=11,c=6,m=10,w=b("easy"),h=!1,I=0;X(()=>{C()});function C(){h=!1,g.value=m,V.value=0;const t=E(G);let e=t.clientWidth-20,i=t.clientHeight-40;W=Math.ceil(e/c),f=Math.floor(i/W),S(),a.value=J(f,c,m)}let F=null;function S(){let t=1;clearInterval(F),F=setInterval(()=>{V.value=t++},1e3)}function j(){clearInterval(F)}function J(t,e,i){let s=[];for(let n=0;n<t;n++){const l=new Array(e);l.fill(0),s[n]=l}for(let n=0;n<i;n++)B();function B(){let n=Math.floor(Math.random()*(t-1)),l=Math.floor(Math.random()*(e-1));s[n][l]!==v?s[n][l]=v:B()}for(let n=0;n<t;n++)for(let l=0;l<e;l++)if(s[n][l]===v){for(let o=-1;o<2;o++)p(n-1,l+o),p(n+1,l+o);p(n,l+1),p(n,l-1)}function p(n,l){n>=0&&n<t&&l>=0&&l<e&&s[n][l]!==v&&(s[n][l]-=1)}return s}function K(t,e){if(h)return;a.value[t][e]>10?(a.value[t][e]=-(a.value[t][e]%10),g.value+=1):g.value&&(a.value[t][e]=-a.value[t][e]+10,g.value-=1)}function O(t,e){if(h)return;const i=a.value[t][e];if(!(i>0)){if(i===0){M(t,e);return}i===v?(a.value[t][e]=-a.value[t][e],R.error("游戏失败"),h=!0,j(),q()):(I+=1,a.value[t][e]=-a.value[t][e]),f*c-I<=m&&(R.success("恭喜你，游戏成功！"),I=0,h=!0,j(),q())}}function q(){let t=0,e=0;const i=setInterval(()=>{if(t>=f||e>=c){clearInterval(i);return}a.value[t][e]===v&&(a.value[t][e]=-a.value[t][e]),t<f&&(e<c-1?e++:(t++,e=0))},10)}function M(t,e){if(t<0||t>=f||e<0||e>=c)return;if(a.value[t][e]===0){I+=1,a.value[t][e]=99;for(let s=-1;s<2;s++)M(t-1,e+s),M(t+1,e+s);M(t,e+1),M(t,e-1)}}function P(){C()}function Q(t){t==="easy"?(f=11,c=6,m=10,w.value=t,C()):t==="medium"?(f=16,c=9,m=35,w.value=t,C()):t==="hard"&&(f=22,c=12,m=70,w.value=t,C())}return(t,e)=>{const i=D("a-button"),s=D("a-select-option"),B=D("a-select"),p=D("a-space");return r(),u("div",y,[d("section",{ref_key:"game",ref:G,class:"game-box",onContextmenu:e[0]||(e[0]=n=>{n.preventDefault()})},[(r(!0),u(A,null,H(a.value,(n,l)=>(r(),u("div",{class:"rows",key:l},[(r(!0),u(A,null,H(n,(o,T)=>(r(),u("div",{class:Y(["cols",`color${o} ${o>0&&o<10||o==99?"sweeped":""}`]),key:T,onClick:z=>O(l,T),onContextmenu:z=>{z.preventDefault(),K(l,T)}},[o>=10?(r(),u(A,{key:0},[o!=99?(r(),u("span",ee,"")):L("",!0)],64)):o>0?(r(),u(A,{key:1},[o===-v?(r(),u("span",te,"")):(r(),u("span",ne,$(o),1))],64)):L("",!0)],42,x))),128))]))),128))],544),d("footer",null,[_(p,{class:"tool"},{default:k(()=>[_(i,{onClick:P,class:"restart"},{default:k(()=>e[1]||(e[1]=[N("重启")])),_:1}),_(B,{onChange:Q,value:E(w),style:{width:"120px"}},{default:k(()=>[_(s,{value:"easy"},{default:k(()=>e[2]||(e[2]=[N("简单")])),_:1}),_(s,{value:"medium"},{default:k(()=>e[3]||(e[3]=[N("中等")])),_:1}),_(s,{value:"hard"},{default:k(()=>e[4]||(e[4]=[N("困难")])),_:1})]),_:1},8,["value"])]),_:1}),d("div",le,[d("div",ae,[e[5]||(e[5]=d("i",{class:"iconfont"},"",-1)),d("span",null,$(g.value),1)]),d("div",se,[e[6]||(e[6]=d("i",{class:"iconfont"},"",-1)),d("span",null,$(V.value),1)])])])])}}}),ue=Z(oe,[["__scopeId","data-v-1f59f7a2"]]);export{ue as default};
