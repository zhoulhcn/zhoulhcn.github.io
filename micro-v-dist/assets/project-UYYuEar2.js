import{d as U,u as J,c as m,D as X,r as y,E as Y,G as K,H as Q,z as Z,o as s,e as o,f as r,F as C,k as N,t as k,x as _,I as E,g as w,j as T,v as W,l as ee,m as O,s as te,n as se,J as oe,_ as ne}from"./index-Cvl347pw.js";const ie={key:0,class:"status-container"},ae={class:"content-wrap"},re={class:"mid-view-window"},le=["onClick"],ce={key:0,class:"scroll-into-tip"},ue={key:0},de={class:"title"},ve={key:0},fe=["href"],pe={class:"attach"},_e={key:0},he=["href"],me={key:0,class:"desc"},ye={key:1,class:"mobile-view-mode"},ke={class:"info"},we={key:0},ge={class:"title"},Ie={key:0},We=["href"],je={class:"attach"},Le={key:0},De=["href"],Re={key:0,class:"desc"},Ce=U({__name:"project",setup(Ee){te.config({duration:1,maxCount:1});const S=J(),b=ee(),V=se(),q=m(()=>S.getDeviceType),z=m(()=>q.value===oe.MOBILE),c=X({projectList:[],originList:[]}),l={NARROW:"narrow",WIDE:"wide"},d=y(l.NARROW),x=y(null),v=y(0),a=m(()=>c.projectList[v.value]);Y(a,t=>{b.query.id=t.id});const B=y(0),j=y(0),M=m(()=>d.value===l.NARROW?{marginTop:0}:{marginTop:`-${j.value}px`}),P=m(()=>d.value===l.WIDE?{opacity:1,marginTop:0}:{marginTop:`${j.value}px`});K(()=>{L(),window.addEventListener("resize",L)}),Q(()=>{window.removeEventListener("resize",L)}),document.onkeyup=function(t){const{code:e}=t;e==="ArrowLeft"&&p(-1),e==="ArrowRight"&&p(1),e==="ArrowUp"&&h(l.NARROW,-1),e==="ArrowDown"&&h(l.WIDE,1)},$();function $(){const t=Z();c.originList=t;const e=t.length,i=[];for(;i.length<5;)for(let u=0;u<e;u++){const R=t[u];i.push({...R})}const g=b.query.id,n=i.findIndex(u=>u.id==Number(g));v.value=n>-1?n:0;const I=i.length;let D=2-v.value;for(let u=0;u<I;u++){const R=i[u];R.order=D%I,D++}c.projectList=i}function L(){const t=x.value;t&&(B.value=t.clientWidth,j.value=t.clientHeight)}let f=null;function h(t,e){f||!c.projectList.length||(f=!0,setTimeout(()=>{f=null},500),!t&&!e&&(d.value==l.WIDE?d.value=l.NARROW:d.value=l.WIDE),d.value=t)}function H(t){t.preventDefault();const{deltaY:e,deltaX:i}=t;Math.abs(e)>Math.abs(i)?e>0?h(l.WIDE,1):h(l.NARROW,-1):i>0?p(1):p(-1)}function A(){const{id:t}=a.value;V.push({name:"blog-gallery",query:{projectId:t}})}function F(t){const{order:e=0}=t;return{left:e*50-75+"%"}}function p(t){if(d.value===l.WIDE)return;const e=c.projectList.length;if(!(f||!e)){if(f=!0,t>0){for(const i of c.projectList)i.order=(i.order-1+e)%e;v.value=(v.value+1)%e}if(t<0){for(const i of c.projectList)i.order=(i.order+1)%e;v.value=(v.value-1+e)%e}setTimeout(()=>{f=null},500)}}function G(t){const{order:e}=t;e!==a.value.order&&(e>a.value.order&&p(1),e<a.value.order&&p(-1))}return(t,e)=>{const i=O("Image"),g=O("a-space");return s(),o("div",{class:W(["project-container",d.value]),ref_key:"viewerRef",ref:x},[c.projectList.length?(s(),o(C,{key:1},[z.value?(s(),o("div",ye,[(s(!0),o(C,null,N(c.originList,n=>(s(),o("div",{class:"swiper-item",key:n},[w(i,{src:n.poster,fit:"contain"},null,8,["src"]),r("div",ke,[n?(s(),o("footer",we,[r("div",ge,k(n.title),1),w(g,null,{default:T(()=>[r("div",null,[n.link?(s(),o("a",{key:1,target:"_blank",href:n.link},"项目地址",8,We)):(s(),o("span",Ie,"项目地址"))]),r("div",je,[n.attachment?(s(),o("a",{key:1,target:"_blank",href:n.attachment}," 项目附件 ",8,De)):(s(),o("span",Le,"项目附件"))]),r("div",{class:W(["theme-link",{disabled:!n.gallery}]),onClick:A}," 项目截图 ",2)]),_:2},1024),n.remark?(s(),o("div",Re,k(n.remark),1)):_("",!0)])):_("",!0)])]))),128))])):(s(),o("div",{key:0,onWheel:H,class:"pc-view-mode"},[r("div",{class:"pc-narrow-wrap",style:E(M.value)},[r("div",ae,[r("div",re,[(s(!0),o(C,null,N(c.projectList,(n,I)=>(s(),o("div",{class:W(["drawer-item",{[`drawer-item-order-${n.order}`]:!0}]),key:I,onClick:D=>G(n),style:E(F(n))},[w(i,{style:{width:"100%",height:"100%"},src:n.poster,fit:"cover"},null,8,["src"])],14,le))),128))]),a.value?(s(),o("div",ce,[r("div",null,k(a.value.title),1),r("div",{class:"iconfont",onClick:e[0]||(e[0]=n=>h(l.WIDE,1))},"")])):_("",!0)])],4),a.value?(s(),o("div",{key:0,class:"view-wide-wrap",style:E(P.value)},[w(i,{style:{width:"100%",height:"100%"},src:a.value.poster,fit:"contain"},null,8,["src"]),a.value?(s(),o("footer",ue,[r("div",de,k(a.value.title),1),w(g,null,{default:T(()=>[r("div",null,[a.value.link?(s(),o("a",{key:1,target:"_blank",href:a.value.link},"项目地址",8,fe)):(s(),o("span",ve,"项目地址"))]),r("div",pe,[a.value.attachment?(s(),o("a",{key:1,target:"_blank",href:a.value.attachment}," 项目附件 ",8,he)):(s(),o("span",_e,"项目附件"))]),r("div",{class:W(["theme-link",{disabled:!a.value.gallery}]),onClick:A}," 项目截图 ",2)]),_:1}),a.value.remark?(s(),o("div",me,k(a.value.remark),1)):_("",!0)])):_("",!0)],4)):_("",!0)],32))],64)):(s(),o("div",ie,e[1]||(e[1]=[r("div",{class:"empty-status"},"项目列表为空",-1)])))],2)}}}),xe=ne(Ce,[["__scopeId","data-v-3a9172d9"]]);export{xe as default};
